---
name: smart-lookup-and-merge
description: Умное соединение данных с fuzzy matching. Используй для объединения данных из разных источников с поддержкой нечёткого сопоставления, когда точные совпадения невозможны.
---

# Smart Lookup and Merge Tool

Инструмент для умного соединения данных с поддержкой fuzzy matching.

## Параметры

- `lookup_file` (required, string) - Имя файла для lookup (источник данных для объединения)
- `left_on` (required, string) - Колонка в основных данных для соединения
- `right_on` (required, string) - Колонка в lookup файле для соединения
- `columns_to_add` (optional, array) - Колонки для добавления из lookup файла
- `fuzzy_threshold` (optional, number) - Порог для fuzzy matching (0-1, по умолчанию 0.9)

## Использование

Инструмент выполняет left join с поддержкой нечёткого сопоставления значений. Полезен когда точные совпадения невозможны из-за опечаток, разных форматов или вариаций написания.

## Примеры

```json
{
  "lookup_file": "companies.csv",
  "left_on": "company_name",
  "right_on": "name",
  "columns_to_add": ["address", "phone", "email"],
  "fuzzy_threshold": 0.85
}
```

## Fuzzy Threshold

- `0.9-1.0` - Строгое сопоставление (почти точные совпадения)
- `0.8-0.9` - Умеренное сопоставление (допускает небольшие различия)
- `0.7-0.8` - Слабое сопоставление (допускает значительные различия)

## Результат

Возвращает:
- `success` - статус выполнения
- `fuzzy_matches` - количество найденных нечётких совпадений
- `threshold_used` - использованный порог
- `columns_added` - добавленные колонки

